<!DOCTYPE append>

<append>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    

    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>Hello World</title>
	
	
	
<script src="https://www.gstatic.com/firebasejs/5.3.0/firebase.js"></script>

<!--<script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-firestore.js"></script>-->

<script>
  // Initialize Firebase
  
  var config = {
    apiKey: "AIzaSyDQjzw0nVa1H8OKID54qO3eicyRBTP_hRw",
    authDomain: "techtravel0774.firebaseapp.com",
    databaseURL: "https://techtravel0774.firebaseio.com",
    projectId: "techtravel0774",
    storageBucket: "",
    messagingSenderId: "425394525968"
  };
  firebase.initializeApp(config);
  var db = firebase.firestore();
   
</script>
<script src="https://cdn.firebase.com/libs/firebaseui/3.2.0/firebaseui.js"></script>
<link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.2.0/firebaseui.css" />
<script src="https://www.gstatic.com/firebasejs/ui/3.2.0/firebase-ui-auth__en.js"></script>
<link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/3.2.0/firebase-ui-auth.css" />

<link rel="stylesheet" href="font\web-fonts-with-css\css\fontawesome-all.css">
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jqmobile.js"></script>
<script type="text/javascript" src="cycle.js"></script>
<link rel="stylesheet"  href="css/animate.css"/>
<style>#firstDiv{-webkit-animation-duration: 4.5s;-webkit-animation-delay: 0s;}
 
::-webkit-input-placeholder {
   text-align: center;
}
body{font-family:sans-serif}
 
body.modal-open {
overflow-x: hidden;
    position: fixed;
}

append, body {
  overflow-x:hidden 
} 

 
</style>
	
	
	
	
</head>

<body>

<div class='firstDiv'><!-- class='check_book_request' -->
<div style="position:relative;height:154px;width:94.5%;left:2.7%;background-color:rgb(72, 133, 237);text-align:center;top:18px;font-size:30.6px;color:white"  onclick="hku()">
<span style="position:relative;top:36%;"><i class="fas fa-address-card"></i> check bookings</span>
</div>
<br/>
<div style="position:relative;height:154px;width:94.5%;left:2.7%;background-color:rgb(34, 255, 34);text-align:center;top:18px;font-size:22.5px;color:white" onclick="fake()" >
<span style="position:relative;top:36%;"><i class="fas fa-chart-bar"></i> luxury coach seatings</span>
</div>
<br/>
 
<div style="position:relative;height:154px;width:94.5%;left:2.7%;background-color:#f4c20d;text-align:center;top:18px;font-size:22.5px;color:white" onclick="fuck()" >
<span style="position:relative;top:36%;"><i class="fas fa-chart-bar"></i> normal coach seating</span>
</div>
<br/> 
 
</div>

<div style="position:relative;width:90%;left:4.95%;;text-align:center;top:15.3%;display:none" class='check_book_response'>
 <input type='text' data-role="none" style="position:relative;display:inline-block;height:36px;width:85.4%;top:18px;background:none;border:1px solid black" placeholder="ticket number or passport or name" class='still'/> &nbsp;
 <span style="position:relative;top:18px;display:inline-block" onclick="search ()"><i class='fa fa-search'></i></span>
 <div class='Nkosi'></div><br/>
 <div style="position:relative;height:27px;width:54%;background-color:yellow;border-radius:9px;top:18px;left:22.95%;display:none" class='finished'>
 <span style="position:relative;top:18%" > <i class="fas fa-spinner fa-spin" id="huku"></i> <t id="t-tag">Check-In</t></span>
 </div>
</div>

<div style="position:relative;width:90%;left:4.95%;text-align:center;top:15.3%;display:none" class='update_seat_response'>
<div class='coll' style="position:relative;height:27px;width:44.1%;background-color:yellow;border-radius:9px;display:inline-block;text-align:center">
<span style="position:relative;top:18%">submit</span>
</div>
<div class='coll' style="position:relative;height:27px;width:44.1%;display:inline-block;text-align:center">
<span class='go_less'><i class='fa fa-arrow-left'></i></span> 
<span class='dateVal'>28</span> 
/ 
<span class='monthVal'>11</span> 
/ 
<span class='yearVal'>2018 </span>
<span class='go_more'><i class='fa fa-arrow-right'></i></span>
</div><br/>
</div>
 

<script>

 
 $(document).bind('pageinit', function(){
 
 });
 alert("javascript active");
 
 function hku(){
 alert("js responding");
 }
 
Array.prototype.unique = function() {
    var a = this.concat();
    for(var i=0; i<a.length; ++i) {
        for(var j=i+1; j<a.length; ++j) {
            if(a[i] === a[j])
                a.splice(j--, 1);
        }
    }

    return a;
};

//var array1 = ["Vijendra","Singh"];
//var array2 = ["Singh", "Shakya"];
// Merges both arrays and gets unique items
//var array3 = array1.concat(array2).unique(); 

//console.log(array3);




function search (){
window.oceans = $(".still").val();


setTimeout(function (){
$("#huku").hide();
},4500);

 var checkLS = localStorage.getItem(""+window.oceans+"");

 if(checkLS == 1){
 alert("it was checked");
 }else{

 $(".finished").css({"display":"true"}).show();
 
 var small_devMin = window.matchMedia( "(min-height:236px)" );
 var small_devMax= window.matchMedia( "(max-height: 500px)" );
 if (small_devMin.matches && small_devMax.matches) {
 
   var citiesRef = db.collection("intercape");

var query = citiesRef.where("TicketNumber", "==", ""+oceans+"").get().then((querySnapshot) => {
   querySnapshot.forEach((doc) => {
        console.log(`${doc.id} => ${doc.data()}`);
    var object = doc.data();
	$(".Nkosi").html("<br/>" + object.Datas ).css({"font-size":"12.6px"});
	$("#nambia").html("This ticket was successfully purchased");
   //console.log(object.Datas );
   console.log(object.store );
 })
 })
 
 }
 
 var se_devMin = window.matchMedia( "(min-height: 505px)" );
 var se_devMax= window.matchMedia( "(max-height: 590px)" );
 if (se_devMin.matches && se_devMax.matches) {
 
   var citiesRef = db.collection("intercape");

var query = citiesRef.where("TicketNumber", "==", ""+oceans+"").get().then((querySnapshot) => {
   querySnapshot.forEach((doc) => {
        console.log(`${doc.id} => ${doc.data()}`);
    var object = doc.data();
	$(".Nkosi").html("<br/>" + object.Datas ).css({"font-size":"13.5px"});
	$("#nambia").html("This ticket was successfully purchased");
   //console.log(object.Datas );
   console.log(object.store );
 })
 })
 
 }
 
 
 var hq = window.matchMedia( "(min-height: 595px)" );
 var mq = window.matchMedia( "(max-height: 667px)" );
 if (hq.matches && mq.matches) {
 
   var citiesRef = db.collection("intercape");

var query = citiesRef.where("TicketNumber", "==", ""+oceans+"").get().then((querySnapshot) => {
   querySnapshot.forEach((doc) => {
        console.log(`${doc.id} => ${doc.data()}`);
    var object = doc.data();
	$(".Nkosi").html("<br/>" + object.Datas ).css({"font-size":"14.4px"});
	$("#nambia").html("This ticket was successfully purchased");
   //console.log(object.Datas );
   console.log(object.store );
 })
 })
 
 }
 
 var hq_plus_min = window.matchMedia( "(min-height: 720px)" );
 var mq_plus_max = window.matchMedia( "(max-height: 800px)" );
 if (hq_plus_min.matches && mq_plus_max.matches) {
 
   var citiesRef = db.collection("intercape");

var query = citiesRef.where("TicketNumber", "==", ""+oceans+"").get().then((querySnapshot) => {
   querySnapshot.forEach((doc) => {
        console.log(`${doc.id} => ${doc.data()}`);
    var object = doc.data();
	$(".Nkosi").html("<br/>" + object.Datas ).css({"font-size":"14.4px"});
	$("#nambia").html("This ticket was successfully purchased");
   //console.log(object.Datas );
   console.log(object.store );
 })
 })
 
 }
 
 var eight_min = window.matchMedia( "(min-height: 801px)" );
 var eight_max = window.matchMedia( "(max-height: 1200px)" );
 if (eight_min.matches && eight_max.matches) {
 
   var citiesRef = db.collection("intercape");

var query = citiesRef.where("TicketNumber", "==", ""+oceans+"").get().then((querySnapshot) => {
   querySnapshot.forEach((doc) => {
        console.log(`${doc.id} => ${doc.data()}`);
    var object = doc.data();
	$(".Nkosi").html("<br/>" + object.Datas ).css({"font-size":"14.4px"});
	$("#nambia").html("This ticket was successfully purchased");
   //console.log(object.Datas );
   console.log(object.store );
 })
 })
 
 }
 
 
 
 
 
 
 }


}


$(".finished").click(function(){
localStorage.setItem(""+window.oceans+"",1);
$("#t-tag").html("Checked In");
});



function trial (){
//alert(arguments.length + arguments[1]);
}

trial("try",2);

$(".check_book_request").click(function (){
$(".check_book_response").css({"display":"true"}).show();
$(".firstDiv").hide();

})


function fake (){

$(".update_seat_response").css({"display":"true"}).show();
$(".firstDiv").hide();


var setBoxes = $(window).width() * 0.180;
$("#heightAka").append("");
for(v = 1; v < 10; v++){

for(i = 1; i < 5; i++){
switch (i){
case 1 :
var setAlph = "A";
break;
case 2 :
var setAlph = "B"
break;
case 3 :
var setAlph = "C";
break;
case 4 :
var setAlph = "D";
break;

}

if(setAlph == "C"){
switch(v){
case 1 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>C</div>");
break;
case 2 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>O</div>");
break;
case 3 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>R</div>");
break;
case 4 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>R</div>");
break;
case 5 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>I</div>");
break;
case 6 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>D</div>");
break;
case 7 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>O</div>");
break;
case 8 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>R</div>");
break;
default :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'><i class='fa fa-bus'></i></div>");

}

}


if(setAlph == "A" || setAlph == "D"){
$(".update_seat_response").append("<div style='position:relative;height:"+ setBoxes +"px ;width:"+ setBoxes +"px;display:inline-block;background-color:rgb(34, 255, 34);margin-top:3.6px;margin-right:2.7px'  onclick = ftg('"+v+"','"+setAlph+"') id='"+v + setAlph+"' > <div style='position:relative;height:45%;width:99.9%;overflow:hidden;text-align:center;font-size:99.9%;color:rgb(72, 133, 237)'>" + v + setAlph +" </div> <div style='position:relative;height:27.95%;width:99.9%;overflow:hidden;color:white'><i class='fa fa-user'></i></div> <div style='position:relative;height:27.95%;width:99.9%;overflow:hidden;font-size:81%;color:white'>window</div></div>");
}else{
$(".update_seat_response").append("<div style='position:relative;height:"+ setBoxes +"px ;width:"+ setBoxes +"px;display:inline-block;background-color:rgb(34, 255, 34);margin-top:3.6px;margin-right:2.7px'  onclick = ftg('"+v+"','"+setAlph+"') id='"+v + setAlph+"' > <div style='position:relative;height:45%;width:99.9%;overflow:hidden;text-align:center;font-size:99.9%;color:rgb(72, 133, 237)'>" + v + setAlph +" </div> <div style='position:relative;height:27.95%;width:99.9%;overflow:hidden;color:white'><i class='fa fa-user'></i></div> <div style='position:relative;height:27.95%;width:99.9%;overflow:hidden;font-size:81%;color:white'>edge</div></div>");
}

}

}



} 

 
function fuck (){


$(".update_seat_response").css({"display":"true"}).show();
$(".firstDiv").hide();
var choose_height = $(window).height() * 0.9;
$("#heightAka").css({"height":choose_height});
var setBoxes = $(window).width() * 0.135;


$("#heightAka").append("");
for(v = 1; v < 10; v++){

for(i = 1; i < 6; i++){
switch (i){
case 1 :
var setAlph = "A";
break;
case 2 :
var setAlph = "B"
break;
case 3 :
var setAlph = "C";
break;
case 4 :
var setAlph = "D";
break;
case 5 :
var setAlph = "E";
break;
}
if(setAlph == "C"){
switch(v){
case 1 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>C</div>");
break;
case 2 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>O</div>");
break;
case 3 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>R</div>");
break;
case 4 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>R</div>");
break;
case 5 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>I</div>");
break;
case 6 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>D</div>");
break;
case 7 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>O</div>");
break;
case 8 :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'>R</div>");
break;
default :
$(".update_seat_response").append("<div style='position:relative;display:inline-block;width:6.3%;'><i class='fa fa-bus'></i></div>");

}

}


if(setAlph == "A" || setAlph == "E"){
$(".update_seat_response").append("<div style='position:relative;height:"+ setBoxes +"px ;width:"+ setBoxes +"px;display:inline-block;background-color:rgb(34, 255, 34);margin-top:3.6px;margin-right:2.7px' onclick = seatNo('"+v+"','"+setAlph+"') id='"+v + setAlph+"'> <div style='position:relative;height:45%;width:99.9%;overflow:hidden;text-align:center;font-size:90%;color:rgb(72, 133, 237)' class='numberSeat' >" + v + setAlph +" </div><div style='position:relative;height:27.95%;width:99.9%;overflow:hidden;color:white;font-size:63%' class='user_icon' ><i class='fa fa-user'></i></div><div style='position:relative;height:27.95%;width:99.9%;overflow:hidden;font-size:81%;color:white;font-size:63%' class='seatLocation'>window</div></div>");
}else if(setAlph == "B" || setAlph == "C"){
$(".update_seat_response").append("<div style='position:relative;height:"+ setBoxes +"px ;width:"+ setBoxes +"px;display:inline-block;background-color:rgb(34, 255, 34);margin-top:3.6px;margin-right:2.7px' onclick = seatNo('"+v+"','"+setAlph+"') id='"+v + setAlph+"'> <div style='position:relative;height:45%;width:99.9%;overflow:hidden;text-align:center;font-size:90%;color:rgb(72, 133, 237)' class='numberSeat' >" + v + setAlph +" </div><div style='position:relative;height:27.95%;width:99.9%;overflow:hidden;color:white;font-size:63%' class='user_icon' ><i class='fa fa-user'></i></div><div style='position:relative;height:27.95%;width:99.9%;overflow:hidden;font-size:81%;color:white;font-size:63%' class='seatLocation'>edge</div></div>");
}else{
$(".update_seat_response").append("<div style='position:relative;height:"+ setBoxes +"px ;width:"+ setBoxes +"px;display:inline-block;background-color:rgb(34, 255, 34);margin-top:3.6px;margin-right:2.7px' onclick = seatNo('"+v+"','"+setAlph+"') id='"+v + setAlph+"'> <div style='position:relative;height:45%;width:99.9%;overflow:hidden;text-align:center;font-size:90%;color:rgb(72, 133, 237)' class='numberSeat' >" + v + setAlph +" </div><div style='position:relative;height:27.95%;width:99.9%;overflow:hidden;color:white;font-size:63%' class='user_icon' ><i class='fa fa-user'></i></div><div style='position:relative;height:27.95%;width:99.9%;overflow:hidden;font-size:81%;color:white;font-size:63%' class='seatLocation'>center</div></div>");
}




}

}
} 
 
 
function seatNo(a, b){
var set = a + b;
var testAttr = $("div#"+set+"").attr("class");
if(testAttr == undefined || testAttr == ""){
$("#"+set+"").addClass("intelli").css({"background-color":"silver"});
}else{
$("#"+set+"").removeClass("intelli").css({"background-color":"rgb(34, 255, 34)"});
}

}


$(".coll").click(function(){


 var sortNames = $(".intelli");

 var setArr = [];
 for(var i = 0; i < sortNames.length; i++){
    var input_name = $(sortNames[i]).attr("id");
 
 setArr.push(input_name);
 
}

/* console.log(setArr);
 for(i = 0; i < setArr.length; i++){
 console.log(setArr[i]);
 }
*/
 
 var day = parseInt($(".dateVal").text());
 var month = parseInt($(".monthVal").text());
 var year = parseInt($(".yearVal").text());



  db.collection("seats").add({
  taken : [],
  intercape : true,
  coach : true,
  day : day,
  month : month,
  year : year  
 })
.then(function(docRef) {
    console.log("Document written with ID: ", docRef.id);
 
})
.catch(function(error) {
    console.error("Error adding document: ", error);
	 
});
 
 
 
db.collection("seats").where('intercape','==',true).where('luxury','==',true).where('day','==',day).where('month','==',month).where('year','==',year).get().then((querySnapshot) => {

querySnapshot.forEach((doc) => {

var object = doc.data();



 

})

})
 


 
/* 
  db.collection("seats").add({
    taken : setArr,
	intercape : true,
	luxury : true,
	day : day,
	month : month,
	year : year
	
  })
.then(function(docRef) {
    console.log("Document written with ID: ", docRef.id);
 
})
.catch(function(error) {
    console.error("Error adding document: ", error);
	 
});	  */

/*
var jobskill_query = db.collection('seats').where('intercape','==',true).where('luxury','==',true);
jobskill_query.get().then(function(querySnapshot) {
querySnapshot.forEach(function(doc) {
doc.ref.delete();
  });
});
*/
 
});

function ftg(a, b){
var set = a + b;
var testAttr = $("div#"+set+"").attr("class");
if(testAttr == undefined || testAttr == ""){
$("#"+set+"").addClass("intelli").css({"background-color":"silver"});
}else{
$("#"+set+"").removeClass("intelli").css({"background-color":"rgb(34, 255, 34)"});
}

}


var g = new Date();
$(".dateVal").html(g.getDate());
$(".monthVal").html(g.getMonth() + 1);
$(".yearVal").html(g.getFullYear());

$(".go_less").click(function(){
var d = $(".dateVal").text();
var m = $(".monthVal").text() - 1;
var y = $(".yearVal").text();

var n = new Date(y, m , d);

if(d == 1){
n.setDate(1);  
n.setHours(-1);
$(".dateVal").html(n.getDate());
$(".monthVal").html(n.getMonth() + 1);
$(".yearVal").html(n.getFullYear());
}
else
{
$(".dateVal").html(n.getDate() - 1);
$(".monthVal").html(n.getMonth() + 1);
$(".yearVal").html(n.getFullYear());

}
});

$(".go_more").click(function(){
//alert("ayo more");
});

</script>

</body>

</append>
